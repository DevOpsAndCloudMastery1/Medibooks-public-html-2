<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Appointment Booking and Tracking</title>
    <link href="styles/medibooks-styles.css" rel="stylesheet">
    <link href="js/bootstrap-5.1.3-dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="js/bootstrap-5.1.3-dist/js/bootstrap.bundle.min.js" defer></script>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="home.html">
                <img src="images/MediBooks-Logo-1.png" alt="MediBooks Logo"> MediBooks
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="home.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="user-profile.html">My Profile</a></li>
                    <li class="nav-item"><a class="nav-link" href="doctor-search.html">Search Doctor</a></li>
                    <li class="nav-item"><a class="nav-link active" href="appointment-booking.html">Appointments</a></li>
                    <li class="nav-item"><a class="nav-link" href="doctor-reviews.html">Doctor Reviews</a></li>
                    <li class="nav-item"><a class="nav-link" href="login.html">Sign Out</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <h1 class="text-center mb-4">Book and Manage Appointments</h1>
        
        <section class="mb-5">
            <h2>Available Doctors</h2>
            <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3">
                <!-- Doctor 1 -->
                <div class="col mb-4">
                    <div class="card">
                        <img src="images/doctor1.jpg" class="card-img-top" alt="Dr. John Smith">
                        <div class="card-body">
                            <h5 class="card-title">Dr. John Smith</h5>
                            <p class="card-text">Cardiologist</p>
                            <button class="btn btn-primary" onclick="selectDoctor('Dr. John Smith - Cardiologist')">Book Appointment</button>
                        </div>
                    </div>
                </div>

                <!-- Doctor 2 -->
                <div class="col mb-4">
                    <div class="card">
                        <img src="images/doctor2.jpg" class="card-img-top" alt="Dr. Emma Davis">
                        <div class="card-body">
                            <h5 class="card-title">Dr. Emma Davis</h5>
                            <p class="card-text">Neurologist</p>
                            <button class="btn btn-primary" onclick="selectDoctor('Dr. Emma Davis - Neurologist')">Book Appointment</button>
                        </div>
                    </div>
                </div>

                <!-- Doctor 3 -->
                <div class="col mb-4">
                    <div class="card">
                        <img src="images/doctor3.jpg" class="card-img-top" alt="Dr. Michael Brown">
                        <div class="card-body">
                            <h5 class="card-title">Dr. Michael Brown</h5>
                            <p class="card-text">Pediatrician</p>
                            <button class="btn btn-primary" onclick="selectDoctor('Dr. Michael Brown - Pediatrician')">Book Appointment</button>
                        </div>
                    </div>
                </div>

                <!-- Doctor 4 -->
                <div class="col mb-4">
                    <div class="card">
                        <img src="images/doctor4.jpg" class="card-img-top" alt="Dr. Olivia Wilson">
                        <div class="card-body">
                            <h5 class="card-title">Dr. Olivia Wilson</h5>
                            <p class="card-text">Orthopedic Surgeon</p>
                            <button class="btn btn-primary" onclick="selectDoctor('Dr. Olivia Wilson - Orthopedic Surgeon')">Book Appointment</button>
                        </div>
                    </div>
                </div>

                <!-- Doctor 5 -->
                <div class="col mb-4">
                    <div class="card">
                        <img src="images/doctor5.jpg" class="card-img-top" alt="Dr. Liam Johnson">
                        <div class="card-body">
                            <h5 class="card-title">Dr. Liam Johnson</h5>
                            <p class="card-text">Dermatologist</p>
                            <button class="btn btn-primary" onclick="selectDoctor('Dr. Liam Johnson - Dermatologist')">Book Appointment</button>
                        </div>
                    </div>
                </div>

                <!-- Doctor 6 -->
                <div class="col mb-4">
                    <div class="card">
                        <img src="images/doctor6.jpg" class="card-img-top" alt="Dr. Sophia Martinez">
                        <div class="card-body">
                            <h5 class="card-title">Dr. Sophia Martinez</h5>
                            <p class="card-text">Gynecologist</p>
                            <button class="btn btn-primary" onclick="selectDoctor('Dr. Sophia Martinez - Gynecologist')">Book Appointment</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2>Book an Appointment</h2>
            <form id="appointment-form">
                <div class="mb-3">
                    <label for="doctor" class="form-label">Selected Doctor:</label>
                    <input type="text" id="doctor" name="doctor" class="form-control" readonly required>
                </div>
                <div class="mb-3">
                    <label for="patient-name" class="form-label">Your Name:</label>
                    <input type="text" id="patient-name" name="patient-name" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Your Email:</label>
                    <input type="email" id="email" name="email" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label for="appointment-date" class="form-label">Appointment Date:</label>
                    <input type="date" id="appointment-date" name="appointment-date" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-primary">Submit</button>
            </form>

            <div id="confirmation" class="mt-4" style="display: none;">
                <h3>Appointment Confirmed!</h3>
                <p><strong>Doctor:</strong> <span id="confirm-doctor"></span></p>
                <p><strong>Name:</strong> <span id="confirm-name"></span></p>
                <p><strong>Email:</strong> <span id="confirm-email"></span></p>
                <p><strong>Date:</strong> <span id="confirm-date"></span></p>
            </div>
        </section>

        <section>
            <h2>Appointment Tracking and Management</h2>
            <div class="mb-4">
                <h3>Active Bookings</h3>
                <ul id="active-bookings" class="list-group">
                    <!-- Active bookings will be dynamically populated here -->
                </ul>
            </div>
            <div class="mb-4">
                <h3>Past Bookings</h3>
                <ul id="past-bookings" class="list-group">
                    <!-- Past bookings will be dynamically populated here -->
                </ul>
            </div>
        </section>
    </div>

    <footer class="bg-dark text-white text-center py-3">
        <p>&copy; 2025 MediBooks</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            loadBookings();
        });

        function loadBookings() {
            const activeBookings = JSON.parse(localStorage.getItem("activeBookings")) || [];
            const activeList = document.getElementById("active-bookings");
            const pastList = document.getElementById("past-bookings");

            activeList.innerHTML = "";
            pastList.innerHTML = "";

            activeBookings.forEach((booking, index) => {
                const listItem = document.createElement("li");
                listItem.classList.add("list-group-item");
                listItem.innerHTML = `${booking.doctor} - ${booking.date} at ${booking.time} - ${booking.status}
                    <button class="btn btn-warning btn-sm ms-2" onclick="reschedule(${index})">Reschedule</button>
                    <button class="btn btn-danger btn-sm ms-2" onclick="cancel(${index})">Cancel</button>`;
                activeList.appendChild(listItem);
            });
        }

        function reschedule(index) {
            const activeBookings = JSON.parse(localStorage.getItem("activeBookings")) || [];
            const newDate = prompt("Enter a new date (YYYY-MM-DD):");
            if (newDate) {
                activeBookings[index].date = newDate;
                localStorage.setItem("activeBookings", JSON.stringify(activeBookings));
                alert("Appointment rescheduled successfully!");
                loadBookings();
            }
        }

        function cancel(index) {
            const activeBookings = JSON.parse(localStorage.getItem("activeBookings")) || [];
            if (confirm("Are you sure you want to cancel this appointment?")) {
                activeBookings.splice(index, 1);
                localStorage.setItem("activeBookings", JSON.stringify(activeBookings));
                alert("Appointment canceled successfully!");
                loadBookings();
            }
        }

        document.getElementById("appointment-form").addEventListener("submit", function (event) {
            event.preventDefault();
            const doctor = document.getElementById("doctor").value;
            const name = document.getElementById("patient-name").value;
            const email = document.getElementById("email").value;
            const date = document.getElementById("appointment-date").value;

            const activeBookings = JSON.parse(localStorage.getItem("activeBookings")) || [];
            activeBookings.push({ doctor, date, time: "TBD", status: "Confirmed" });
            localStorage.setItem("activeBookings", JSON.stringify(activeBookings));
            alert("Appointment booked successfully!");
            document.getElementById("appointment-form").reset();
            loadBookings();
        });

        function selectDoctor(doctorName) {
            document.getElementById("doctor").value = doctorName;
            window.scrollTo({ top: document.getElementById("appointment-form").offsetTop, behavior: 'smooth' });
        }
    </script>
</body>

</html>
